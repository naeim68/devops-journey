# 🧠 Linux Basics  

یادداشت جامع مفاهیم پایه‌ای کار با خط فرمان لینوکس، مدیریت کاربران، ساختار سیستم، شبکه و پارتیشن‌بندی.

---

## 👤 مدیریت کاربران (User Management)

| دستور | توضیح | مثال |
|:------|:------|:------|
| `sudo -i` | فعال‌سازی دسترسی کاربر **root** (ورود به محیط مدیریتی) | — |
| `passwd [username]` | تغییر یا تنظیم رمز عبور برای کاربر مشخص‌شده | `passwd naeim` |
| `su -` | سوییچ (تغییر) کاربر به حساب دیگر؛ اگر به root سوییچ شود، محیط root بارگذاری می‌شود | `su - root` |
| `whoami` | نمایش کاربر فعلی سیستم | `whoami` |

---

## 💻 ساختار خط فرمان (Command Prompt Structure)

```bash
root@ubuntuDesktop:~#
```

- `root` : نام کاربر فعلی  
- `ubuntuDesktop` : نام میزبان (hostname)  
- `:` → جداکننده می‌باشد  
- `~` → دایرکتوری فعلی (Home Directory)  
- `#` → اگر نشانه‌ی پایانی # باشد، یعنی کاربر root است  
- `$` → اگر نشانه‌ی پایانی $ باشد، یعنی کاربر استاندارد (غیرمدیر) است  

---

## 🧭 دستورهای مرتبط با سیستم و مسیرها

| دستور | توضیح | مثال |
|:------|:------|:------|
| `hostname` | نمایش نام سیستم | `hostname` |
| `hostnamectl set-hostname [newname]` | تغییر نام سیستم (نیازمند sudo) | `sudo hostnamectl set-hostname devops-lab` |
| `file [path/to/file]` | تشخیص نوع فایل (متنی، باینری، اسکریپت و...) | `file /etc/passwd` |
| `pwd` | نمایش مسیر فعلی (Print Working Directory) | `pwd` |

---

## 📂 مدیریت پوشه‌ها و فایل‌ها

| دستور | عملکرد | مثال |
|:------|:--------|:------|
| `mkdir [name]` | ساخت دایرکتوری جدید | `mkdir test` |
| `rmdir [name]` | حذف دایرکتوری **خالی** | `rmdir emptydir` |
| `rm -r [path]` | حذف دایرکتوری و محتویات آن (بازگشتی) | `rm -r oldproject` |
| `mkdir -p [parent/child]` | ساخت دایرکتوری‌های تو در تو | `mkdir -p projects/devops/day1` |
| `touch [filename]` | ایجاد فایل جدید یا به‌روزرسانی زمان آخرین تغییر | `touch notes.txt` |
| `cat [filename]` | نمایش محتوای فایل | `cat notes.txt` |
| `echo "text"` | چاپ متن در خروجی (ترمینال) | `echo "Hello Linux"` |
| `echo "text" > file.txt` | نوشتن متن در فایل (بازنویسی) | `echo "new content" > file.txt` |
| `echo "text" >> file.txt` | افزودن متن به انتهای فایل (Append) | `echo "append line" >> file.txt` |
| `ls` | لیست فایل‌ها و پوشه‌های مسیر فعلی | `ls` |
| `ls -a` | نمایش همه‌ی فایل‌ها (شامل مخفی‌ها) | `ls -a` |
| `ls -lh` | نمایش فایل‌ها با جزئیات و حجم خوانا | `ls -lh` |
| `ls -R` | نمایش بازگشتی فایل‌ها و زیرپوشه‌ها | `ls -R` |

---

## 📘 کمک و مستندات

| دستور | توضیح | مثال |
|:------|:------|:------|
| `man [command]` | نمایش راهنمای کامل دستور | `man ls` |
| `[command] --help` | نمایش راهنمای خلاصه دستور | `ls --help` |

---

## ⚙️ نکات تکمیلی

- برای اجرای دستوراتی که نیاز به دسترسی مدیریتی دارند، از `sudo` استفاده کن.  
- هر دستور در لینوکس دو خروجی دارد:  
  - **stdout** → خروجی معمولی  
  - **stderr** → پیام خطا  

می‌توانی این دو را به فایل منتقل کنی:

```bash
ls /root >output.txt 2>error.txt
```

---

## 🌍 بررسی اتصال شبکه و Name Resolution  

### 🔹 دستور `ping`

برای بررسی ارتباط با یک ماشین مقصد استفاده می‌شود و عملکرد شبکه را تأیید می‌کند:

```bash
ping google.com
```

---

## 🔹 Name Resolution

فرآیند **تبدیل نام دامنه به IP** است و توسط **Name Server (DNS)** انجام می‌شود.  
مثلاً:

```bash
google.com → 142.250.74.14
```

---

## 🖥️ انواع سرورهای شبکه

| نوع سرور | وظیفه | توضیح |
|-----------|--------|--------|
| Name Server (DNS) | ترجمه‌ی نام دامنه به IP | مسئول Name Resolution |
| NAT Server | اشتراک‌گذاری اینترنت بین کلاینت‌ها | Network Address Translation |
| DHCP Server | تخصیص خودکار IP به سیستم‌ها | Dynamic Host Configuration Protocol |

---

## ⚙️ فرم‌های مختلف دستورات در لینوکس

| نوع دستور | مثال | توضیح |
|------------|--------|--------|
| Single Dash (-) | `rm -rf` | سبک Unix |
| Double Dash (--) | `rm --recursive` | سبک GNU، خواناتر |
| Without Dash | `ps aux` | سبک BSD، معمول در ابزارهای سیستمی |

---

## 🧩 دستور echo و خروجی‌گیری

| نماد | عملکرد |
|------|----------|
| `>` | بازنویسی فایل (Overwrite) |
| `>>` | افزودن متن به انتهای فایل (Append) |

```bash
echo "Linux Rocks!" > notes.txt
echo "Monitoring is life" >> notes.txt
```

---

## 📂 دستور ls و ساختار خروجی

| دستور | توضیح |
|--------|--------|
| `ls .` | لیست دایرکتوری جاری |
| `ls -l` | نمایش جزئیات فایل‌ها (long list) |
| `ls -a` | نمایش فایل‌های مخفی |
| `ls -lh` | نمایش حجم فایل‌ها به‌صورت خوانا |
| `ls -lha` | ترکیب همه موارد بالا |

---

### 🔍 ساختار مجوزها و نوع فایل‌ها

نمونه خروجی:

```bash
drwxr-xr-x 2 naeim staff 4096 Oct 6 09:42 projects
```

اولین کاراکتر نوع فایل را مشخص می‌کند:

| نماد | نوع فایل |
|-------|-----------|
| - | فایل معمولی |
| d | دایرکتوری |
| l | لینک نمادین (symbolic link) |
| b | دستگاه بلاک (Block device) |
| c | دستگاه کاراکتری (Character device) |
| s | سوکت (Socket) |

---

## 🔗 لینک‌ها در لینوکس

در لینوکس دو نوع لینک داریم:

| نوع لینک | توضیح | دستور ساخت |
|-----------|--------|-------------|
| Hard Link | اشاره مستقیم به inode فایل (داده اصلی) | `ln file1.txt link1.txt` |
| Soft Link (Symbolic) | اشاره غیرمستقیم به مسیر فایل دیگر | `ln -s file1.txt symlink1.txt` |

در خروجی `ls -l` ستون دوم تعداد Hard Linkها را نشان می‌دهد.

---

## 📊 ستون‌های دیگر در خروجی ls -l

| ستون | توضیح |
|--------|--------|
| 3️⃣ Owner | کاربری که فایل را ایجاد کرده و Full Access دارد |
| 4️⃣ Group Owner | گروهی که فایل به آن تعلق دارد |
| 5️⃣ Size | اندازه فایل به بایت |
| 6️⃣ Date & Time | آخرین تغییر یا دسترسی |
| 7️⃣ Name | نام فایل یا دایرکتوری |

---

برای مشاهده اطلاعات دقیق‌تر فایل (از جمله زمان‌ها):

```bash
stat file2.txt
```

---

### 🕒 سه نوع زمان

| نوع زمان | توضیح |
|-----------|--------|
| Access Time (atime) | آخرین زمان دسترسی به فایل |
| Modify Time (mtime) | آخرین زمان تغییر محتوای فایل |
| Change Time (ctime) | آخرین زمان تغییر متادیتا (مجوز، مالکیت) |

---

## 💽 پارتیشن‌بندی در لینوکس

### 🔹 Partition Scheme

برای سازمان‌دهی دیسک از دو نوع **Partition Table** استفاده می‌شود:

| نوع | ویژگی | محدودیت |
|------|--------|-----------|
| MBR (Master Boot Record) | برای دیسک‌های کوچک‌تر از 2 TB | حداکثر 4 پارتیشن Primary |
| GPT (GUID Partition Table) | برای دیسک‌های بالای 2 TB | تا 128 پارتیشن |

---

### 🔹 انواع پارتیشن در MBR

| نوع | کاربرد |
|------|--------|
| Primary | پارتیشن بوت‌پذیر که می‌تواند سیستم‌عامل را نگه دارد |
| Extended | پارتیشنی که درون آن چندین پارتیشن منطقی ساخته می‌شود |
| Logical | پارتیشن‌هایی که داخل Extended قرار می‌گیرند |

📘 **نکته:**  
اگر سه پارتیشن Primary داشته باشی، چهارمی باید Extended باشد.  
Logicalها از `/dev/sdb5` به بعد شروع می‌شوند.

---

### 🔹 نمایش دیسک‌ها و وضعیت پارتیشن‌ها

| دستور | توضیح |
|--------|--------|
| `fdisk -l /dev/sda` | نمایش جدول پارتیشن |
| `ls /dev` | مشاهده‌ی دستگاه‌ها |
| `ls /dev/sd*` | نمایش همه‌ی دیسک‌ها |
| `lsblk` | نمایش ساختار پارتیشن‌ها به‌صورت درختی |

---

### 🔹 فایل‌سیستم‌ها (File Systems)

| نوع | ویژگی |
|------|--------|
| ext2 | قدیمی، بدون journaling |
| ext3 | دارای journaling و پایداری بیشتر |
| ext4 | عملکرد بالا، ظرفیت تا 16TB |
| btrfs | مدرن، نیازمند Kernel ≥ 3.10 |
| reiserfs | بیشترین تعداد inode |
| vfat | سازگار با Windows |
| iso9660 | مخصوص CD/DVD |
| nfs | فایل‌سیستم شبکه‌ای |
| swap | فضای مبادله سیستم |
| proc | فایل‌سیستم مجازی پردازش‌ها |

---

### 🔹 فرمت کردن پارتیشن

```bash
mkfs -t ext4 /dev/sdb1
mkfs.ext4 /dev/sdb6
```

---

### 🔹 نمایش فایل‌سیستم‌ها

```bash
lsblk -f
```

---

### 🔹 UUID و Label

هر پارتیشن شناسه‌ای به نام **UUID** دارد که سیستم عامل از آن برای شناسایی استفاده می‌کند.

برای نمایش UUID:

```bash
tune2fs -l /dev/sdb5 | grep UUID
```

برای تعیین Label:

```bash
tune2fs -L music /dev/sdb1
```

| شناسه | کاربرد |
|--------|--------|
| UID | شناسه‌ی کاربر |
| GID | شناسه‌ی گروه |
| UUID | شناسه‌ی پارتیشن |

---

## 🧭 Mount و Addressing

- **Physical Address:** مسیر فیزیکی پارتیشن (مثلاً `/dev/sda1`)  
- **Logical Address (Mount Point):** مسیر منطقی که پارتیشن در آن Mount می‌شود (مثلاً `/mnt/data`)

---

### 🔹 Mount کردن

```bash
mount /dev/sdb1 /mnt/data
```

---

### 🔹 بررسی Mountها

```bash
df
df -h
df -i
df -T
df -Tih
```

📘 **نکته:**  
Mount پس از ریبوت حذف می‌شود مگر در فایل `/etc/fstab` ثبت شده باشد.

---

## 📄 فایل /etc/fstab

| ستون | توضیح |
|--------|--------|
| 1️⃣ File System | آدرس فیزیکی یا UUID یا Label |
| 2️⃣ Mount Point | مسیر Mount |
| 3️⃣ Type | نوع فایل‌سیستم |
| 4️⃣ Options | تنظیمات مثل `defaults`, `rw` |
| 5️⃣ Dump | بکاپ (0/1) |
| 6️⃣ Pass | ترتیب بررسی در بوت |

---

### 🔹 نمونه اضافه کردن UUID

```bash
tune2fs -l /dev/sdb5 > meta-sdb5.txt
grep UUID ./meta-sdb5.txt
tune2fs -l /dev/sdb6 | grep UUID >> /etc/fstab
```